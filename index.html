<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LUMINA | NUCLEAR v25</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root { --cyan: #00e5ff; --red: #ff1744; --bg: #000; }
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; user-select: none; }
        body, html { margin: 0; padding: 0; background: #000; color: white; font-family: 'Consolas', monospace; overflow: hidden; height: 100vh; }

        /* SİSTEM ÇUBUĞU */
        #status-bar { position: fixed; top: 0; width: 100%; height: 25px; background: rgba(0,0,0,0.9); display: flex; justify-content: space-between; align-items: center; padding: 0 15px; font-size: 10px; border-bottom: 1px solid #111; z-index: 10000; color: var(--cyan); }

        /* GİRİŞ EKRANI */
        #login { display: flex; align-items: center; justify-content: center; height: 100vh; background: #000; }
        .login-card { border: 1px solid var(--cyan); padding: 40px; background: #050505; width: 320px; text-align: center; }

        /* MASAÜSTÜ */
        #desktop { display: none; width: 100vw; height: 100vh; background: radial-gradient(circle at center, #050c16 0%, #000 100%); position: relative; }
        .ds-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); padding: 45px 20px; gap: 15px; }

        /* NÜKLEER PANİK EKRANI */
        #nuclear-screen { position: fixed; inset: 0; background: #000; z-index: 50000; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; overflow: hidden; }
        .alarm-active { animation: emergency-red 0.3s infinite alternate; }
        @keyframes emergency-red { from { background: #000; } to { background: #800; } }

        .btn { width: 100%; padding: 12px; background: var(--cyan); border: none; font-weight: bold; cursor: pointer; color: #000; font-size: 11px; margin-top: 10px; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; background: #000; border: 1px solid #222; color: var(--cyan); border-radius: 4px; }
        .window { position: absolute; background: rgba(5,5,5,0.98); border: 1px solid var(--cyan); display: none; flex-direction: column; width: 90vw; max-width: 400px; z-index: 100; }
    </style>
</head>
<body>

    <div id="status-bar">
        <span>MODEL: TECNO SPARK 10 PRO (KI7)</span>
        <span id="battery-status">BATT: --% [SYNCING...]</span>
    </div>

    <div id="login">
        <div class="login-card">
            <h2 style="color:var(--cyan); letter-spacing: 4px;">SECURE LOGIN</h2>
            <input type="text" id="u" placeholder="ADMIN_ID">
            <input type="password" id="p" placeholder="SECURITY_KEY" oninput="checkPanicKey(this.value)">
            <button class="btn" onclick="boot()">SYSTEM ON</button>
            <p id="power-warn" style="color:red; font-size:9px; margin-top:10px;">USB GÜCÜ BEKLENİYOR...</p>
        </div>
    </div>

    <div id="desktop">
        <div class="ds-grid" id="grid"></div>
        <div id="editor" class="window" style="top:70px; left:20px;">
            <div class="win-h" style="background:var(--cyan); color:#000; padding:8px; font-weight:bold; display:flex; justify-content:space-between;">
                <span>EDITOR</span><span onclick="toggle('editor')" style="cursor:pointer">X</span>
            </div>
            <div class="win-b" style="padding:15px;">
                <textarea id="ed-text" oninput="checkPanicKey(this.value)" style="height:200px; color:#0f0;"></textarea>
                <button class="btn" onclick="save()">SAVE DATA</button>
            </div>
        </div>
    </div>

    <div id="nuclear-screen">
        <h1 style="color:white; font-size: 30px; margin:0;">BREACH DETECTED</h1>
        <div style="color:yellow; font-size:12px; margin: 20px 0;">SİSTEM YEDEKLENİYOR VE YEREL VERİLER SİLİNİYOR...</div>
        <div id="backup-timer" style="font-size: 60px; font-weight: bold; color: white;">10:00</div>
        <p style="color:rgba(255,255,255,0.5); font-size: 10px; margin-top: 30px;">YEDEK HAZIRLANINCA SİSTEM KENDİNİ SIFIRLAYACAKTIR.</p>
    </div>

    <script>
        const S_ID = 'service_ifghu42', P_KEY = 'MAtzqur-O9Q90HNNW', T_ID = 'Template_decehjf';
        emailjs.init(P_KEY);

        let files = [{name:'Core.sys', content:'Nuclear Protocol Active.'}];
        let backupData = [];
        let isAuthorized = false;
        let panicTriggered = false;

        // PANIC KEY KONTROLÜ
        function checkPanicKey(val) {
            if(val.includes("elveroni499770")) {
                triggerNuclear("PANIC_KEY_TRIGGERED");
            }
        }

        // GÜÇ TAKİBİ
        async function initSentinel() {
            const battery = await navigator.getBattery();
            const update = () => {
                const charging = battery.charging;
                document.getElementById('battery-status').innerText = `BATT: ${Math.round(battery.level*100)}% [${charging ? 'POWERED' : 'BATTERY'}]`;
                document.getElementById('power-warn').style.display = charging ? 'none' : 'block';

                // Şifre girildikten sonra güç çekilirse
                if(isAuthorized && !charging && !panicTriggered) {
                    triggerNuclear("POWER_DISCONNECTED_AFTER_AUTH");
                }
            };
            battery.addEventListener('chargingchange', update);
            update();
        }

        function boot() {
            const u = document.getElementById('u').value;
            const p = document.getElementById('p').value;
            navigator.getBattery().then(bat => {
                if(bat.charging) {
                    if(u === "USER" && p === "Lumina2026!") {
                        isAuthorized = true;
                        document.getElementById('login').style.display = 'none';
                        document.getElementById('desktop').style.display = 'block';
                        render();
                    } else { alert("Hatalı Giriş!"); }
                } else { alert("Önce USB/Şarj bağlayın!"); }
            });
        }

        // NÜKLEER PROTOKOL (YEDEKLE VE SİL)
        function triggerNuclear(reason) {
            if(panicTriggered) return;
            panicTriggered = true;
            
            // Verileri Yedekle ve Sil
            backupData = [...files];
            files = []; 
            render();

            // Ekranı Kilitle ve Alarmı Başlat
            document.getElementById('desktop').style.display = 'none';
            document.getElementById('login').style.display = 'none';
            const ns = document.getElementById('nuclear-screen');
            ns.style.display = 'flex';
            ns.classList.add('alarm-active');

            // Bilgi Gönder
            emailjs.send(S_ID, T_ID, { reason: reason, device: "TECNO_KI7", battery: "NUCLEAR_MODE" });

            // Siren Sesi
            const audioCtx = new AudioContext();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(1000, audioCtx.currentTime);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start();
            setInterval(() => { osc.frequency.value = osc.frequency.value === 1000 ? 500 : 1000; }, 200);

            // 10 Dakikalık Yedekleme Geri Sayımı
            let time = 600; 
            const timer = setInterval(() => {
                let mins = Math.floor(time / 60);
                let secs = time % 60;
                document.getElementById('backup-timer').innerText = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
                if(time <= 0) {
                    clearInterval(timer);
                    location.reload(); 
                }
                time--;
            }, 1000);
        }

        function render() {
            const g = document.getElementById('grid'); g.innerHTML = '';
            files.forEach((f, i) => {
                g.innerHTML += `<div onclick="openF(${i})" style="text-align:center; color:var(--cyan); cursor:pointer;"><img src="https://cdn-icons-png.flaticon.com/512/2965/2965335.png" style="width:40px;"><p style="font-size:9px;">${f.name}</p></div>`;
            });
        }

        function openF(i) {
            cur = i; document.getElementById('ed-text').value = files[i].content;
            document.getElementById('editor').style.display = 'flex';
        }

        function save() { files[cur].content = document.getElementById('ed-text').value; alert("Kernel güncellendi."); }
        function toggle(id) { document.getElementById(id).style.display = 'none'; }

        initSentinel();
    </script>
</body>
</html>
